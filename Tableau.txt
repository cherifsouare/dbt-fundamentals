/** Tableau Tips

1- Date level

- create a parameter int named dynamic date
- Create a calculated field as follow: 
CASE [Parameters].[Dynamic Date]
WHEN 5 THEN DATENAME('year',[Timestamp])
WHEN 4 THEN DATENAME('year',[Timestamp]) + ' Q' + DATENAME('quarter',[Timestamp])
WHEN 3 THEN DATENAME('year',[Timestamp]) + '/' + STR(DATEPART('month',[Timestamp]))
WHEN 2 THEN DATENAME('year',[Timestamp]) + ' W' + STR(DATEPART('week',[Timestamp]))
WHEN 1 THEN DATENAME('year',[Timestamp]) + '/' + STR(DATEPART('month',[Timestamp])) + '/' + STR(DATEPART('day',[Timestamp]))
WHEN 6 THEN ''
END


2- Find set of metrics after X number of days

-Create a parameter open (where workbook open) like this [Select Days for Contributors to Confirm]
- Create a measure as follows COUNTD(IF DATEDIFF('day', [InviteDate] , [Confirmed Date]) <= [Select Days for Contributors to Confirm]
 THEN [ContributorId] END )


3- Switch betwwen different dates in a parameter and 

IF  [Select Date Type] = 'Accepted Date' THEN [StageDate.Accepted] >= [Start Date] AND [StageDate.Accepted] <= [End Date]

ELSEIF  [Select Date Type] = 'Decision Date' THEN [Decision] >= [Start Date] AND [Decision] <= [End Date]

ELSEIF  [Select Date Type] = 'Rejected Date' THEN [StageDate.Rejected] >= [Start Date] AND [StageDate.Rejected] <= [End Date]

END


4- Row level security 

IF 

[Current user?] = [UserName] THEN 

(IF [IsInternal] = TRUE THEN TRUE

ELSEIF [SpaceId] = [SpaceId (Custom SQL Query1)] AND [Journal Id] = [JournalId (Custom SQL Query)] THEN TRUE

ELSE FALSE

END)

ELSE FALSE 

END




/****** Smart C	hecklist 
# SPECIFICATION
- Analyze requirements
- Update checklist items
- Add estimation
# DEVELOPMENT
- Evaluation of using alternative data source (SF Campaign Members + Opportunities)
- Decision on final source to replace custom source in Tableau
- Build final data source in EDW and Tableau Test
- Publish data source/report on TEST server
# QA
- QA - Developer (@developername)
- QA - Unit (@add_tester_name)
- QA - DIT (@add_tester_name)
- UAT (@add_tester_name)
- Amendments based on feedback
# PROD DEPLOYMENT
- Tag DS/Workbook 'Promote'
- Script Exec Complete (Mon-Thur, 10am, 13pm and 16pm)
- Check PROD DS/Workbook

5--- sHOW Lines and bAR IN A GRAPH USING PARAMETERS AND CALCUALTED FIELDS 


EXAMPLE: AND APLLY THEM TRUE FOR LINES AND FALSE FOR OTHERS
IF 
[Parameters].[Dynamic Measure for General Overview] = 84 OR
[Parameters].[Dynamic Measure for General Overview] = 85 OR 
[Parameters].[Dynamic Measure for General Overview] = 86 OR 
[Parameters].[Dynamic Measure for General Overview] = 87 OR 
[Parameters].[Dynamic Measure for General Overview] = 48 OR
[Parameters].[Dynamic Measure for General Overview] = 49 OR 
[Parameters].[Dynamic Measure for General Overview] = 50 OR
[Parameters].[Dynamic Measure for General Overview] = 51 OR
[Parameters].[Dynamic Measure for General Overview] = 52 OR
[Parameters].[Dynamic Measure for General Overview] = 70 OR
[Parameters].[Dynamic Measure for General Overview] = 71 OR
[Parameters].[Dynamic Measure for General Overview] = 72
THEN TRUE ELSE FALSE END

6---- Sort by measures
create parameter and link to this calculated field in the view 
CASE [Sort By - All RT]
WHEN 'Views' THEN RANK(SUM([RT Articles Views]))
WHEN 'Downloads' THEN RANK(SUM([RT Articles Downloads]))
WHEN 'Citations' THEN RANK(SUM([RT Articles Citations]))
WHEN 'Submissions' THEN RANK(SUM([RT Articles Submitted]))
WHEN 'Publications' THEN RANK(SUM([RT Articles Published]))
END

7-New Author
If { FIXED [AuthorEmail] : MAX ( IF ([Min Internal Article ID] = [Article ID GA]) 
 THEN 1 ELSE 0 END ) } = 1 then TRUE ELSE FALSE END

8- filter between values of parameter
(CASE [Select All/Suggested Contributors]

WHEN "All Potential Contributors" THEN (IF [Is Suggested Contributor ?] = True  THEN 1 ELSEIF  [Is Suggested Contributor ?] = False  THEN 1 else 0 END) 

WHEN "Only Suggested Contributors" THEN (IF [Is Suggested Contributor ?] = True  THEN 1 END)

END) == 1
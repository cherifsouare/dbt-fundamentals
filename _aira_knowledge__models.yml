version: 2

models:
  - name: stg_aira_knowledge__authorsources
    description: "Staged Author Source raw data from AIRA"
    columns:
      - name: surrogate_key
        description: >
          Primary key for the table.
          Each record correspond to a unique combinaison of author,
          their corresponding sourceid and sourcevalue.
        tests:
          - unique:
              config:
                where: "authorsource_sourceid = 20"             
          - not_null:
               config:
                 where: "authorsource_sourceid = 20"

      - name: authorsource_authorid
        description: "Author's Id"
        tests:
          - not_null

      - name: authorsource_sourceid
        description: ""

      - name: authorsource_sourcevalue
        description: ""

  - name: stg_aira_knowledge__authorclosestfrontiersjournals
    description: "Staged Author Closest Forntiers Journal raw data from AIRA"
    columns:
      - name: authorclosestfrontiersjournal_authorid
        description: "Primary key"
        tests:
          - unique
          - not_null

      - name: authorclosestfrontiersjournal_journalid
        description: "Foreign key to stg_aira_knowledge__journals.journal_id"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__journals')
              field: journal_id
          - not_null

      - name: confidence
        description: ""
  
  - name: stg_aira_knowledge__authoremails
    description: "Staged Autor Emails raw data from AIRA"
    columns:
      - name: authoremail_authorid
        description: "Author's Id"
        tests:
          - not_null

      - name: authoremail_validityid
        description: "Foreign key to stg_aira_knowledge__emailvalidity.emailvalidity_validityid"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__emailvalidity')
              field: emailvalidity_validityid
          - not_null

      - name: authoremail_email
        description: "Primary key"
        tests:
          - unique
          - not_null

      - name: is_primary
        description: ""

      - name: verified_date
        description: ""

  - name: stg_aira_knowledge__authorfieldofstudy
    description: "Staged Author field of study raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - authorfieldofstudy_authorid
            - authorfieldofstudy_fieldofstudyid
          quote_columns: true

    columns:
      - name: authorfieldofstudy_authorid
        description: "Author's Id"
        tests:
          - not_null

      - name: authorfieldofstudy_fieldofstudyid
        description: "Foreign key to stg_aira_knowledge__fieldofstudy.fieldofstudyid"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__fieldofstudy')
              field: fieldofstudyid
          - not_null

      - name: similarity
        description: ""

  - name: stg_aira_knowledge__authorfulllists
    description: "Staged Authorfulllist raw data from AIRA"
    columns:
      - name: authorfulllist_authorid
        description: "Primary key"
        tests:
          - unique
          - not_null

      - name: full_name
        description: "Author's fullname"

  - name: stg_aira_knowledge__authors
    description: "Staged Author raw data from AIRA"
    columns:
      - name: author_id
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: author_lastknownaffiliationid
        description: ""

      - name: author_hindex
        description: "Author's H-index"

  - name: stg_aira_knowledge__editorialboardroles
    description: "Staged Editorialboard role raw data from AIRA"
    columns:
      - name: editorialboardrole_roleid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: editorialboardrole_sourceid
        description: ""

      - name: editorialboardrole_description
        description: ""

      - name: editorialboardrole_sourcevalue
        description: ""

  - name: stg_aira_knowledge__editorialroles
    description: "Staged Editorial role raw data from AIRA"
    columns:
      - name: editorialrolerole_authorid
        description: ""

      - name: editorialrole_roleid
        description: "Foreign key to stg_aira_knowledge__editorialboardroles.editorialboardrole_roleid"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__editorialboardroles')
              field: editorialboardrole_roleid
          - not_null

      - name: editorialrole_rolestatus
        description: ""

  - name: stg_aira_knowledge__emailvalidity
    description: "Staged Email Validity raw data from AIRA"
    columns:
      - name: emailvalidity_validityid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

  - name: stg_aira_knowledge__fieldofstudy
    description: "Staged Field of Study raw data from AIRA"
    columns:
      - name: fieldofstudyid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: fieldofstudy_displayname
        description: ""

      - name: fieldofstudy_level
        description: ""

  - name: stg_aira_knowledge__journalmetadata
    description: "Staged Journal Metadata raw data from AIRA"
    columns:
      - name: journalmetadata_journalid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: is_openaccess
        description: ""

  - name: stg_aira_knowledge__journals
    description: "Staged Journal raw data from AIRA"
    columns:
      - name: journal_id
        description: "Primary key for the table."
        tests:
          - unique
          - not_null

      - name: journal_displayname
        description: ""

      - name: publisher_id
        description: ""

  - name: stg_aira_knowledge__journalssn
    description: "Staged Journalssn raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - journalissn_journalid
            - journalissn_issn
          quote_columns: true

    columns:
      - name: journalissn_journalid
        description: "Journal Id"
        tests:
          - not_null
          
      - name: journalissn_issn
        description: ""

  - name: stg_aira_knowledge__organizationrankings
    description: "Staged Organization Ranking raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - organizationranking_organizationid
            - organizationranking_rankingid
            - organizationranking_position
          quote_columns: true

    columns:
      - name: organizationranking_organizationid
        description: "Organization Id"
        tests:
          - not_null

      - name: organizationranking_rankingid
        description: "Foreign key to stg_aira_knowledge__rankings.ranking_id"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__rankings')
              field: ranking_id
        
      - name: organizationranking_position
        description: ""

  - name: stg_aira_knowledge__organizations
    description: "Staged Organization raw data from AIRA"
    columns:
      - name: organization_id
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: organization_countryisocode3
        description: "Foreign key to stg_frontiers_dwh__countries_regions.countries_regions_countryid"
        tests:
          - relationships:
              to: ref('stg_frontiers_dwh__countries_regions')
              field: countries_regions_countryid
        
      - name: organization_displayname
        description: ""

  - name: stg_aira_knowledge__organizationsources
    description: "Staged Organization Source raw data from AIRA"
    columns:
      - name: organizationsource_organizationid
        description: "Primary key for the table"
        tests:
          - unique:
              config:
                where: "organizationsource_sourceid = 24"
          - not_null

      - name: organizationsource_sourceid
        description: ""

      - name: organizationsource_sourcevalue
        description: ""

  - name: stg_aira_knowledge__organizationtopparents
    description: "Staged Organization Top Parent raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - organizationtopparent_id
            - topparentorganization_id
          quote_columns: true

    columns:
      - name: organizationtopparent_id
        description: "Organization Id"
        tests:
          - not_null

      - name: topparentorganization_id
        description: "Top Parent Organization Id"

  - name: stg_aira_knowledge__publicationauthors
    description: "Staged Publication Author raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - publicationauthor_publicationid
            - publicationauthor_authorid
            - publicationauthor_authorsequencenumber
            - publicationauthor_organizationid
          quote_columns: true

    columns:
      - name: publicationauthor_publicationid
        description: ""

      - name: publicationauthor_authorid
        description: "Author Id"
        tests:
          - not_null

      - name: publicationauthor_authorsequencenumber
        description: ""

      - name: publicationauthor_organizationid
        description: ""  

  - name: stg_aira_knowledge__publicationcitations
    description: "Staged Publication Citation raw data from AIRA"
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - publicationcitation_publicationid
            - citedpublication_id
          quote_columns: true

    columns:
      - name: publicationcitation_publicationid
        description: "Publication Id"
        tests:
          - not_null

      - name: citedpublication_id
        description: ""

  - name: stg_aira_knowledge__publications
    description: "Staged Publication raw data from AIRA"
    columns:
      - name: publication_id
        description: "Primary key for the table"
        tests:
          - unique
          - not_null
          
      - name: publication_journalid
        description: "Foreign key to stg_aira_knowledge__journals.journal_id"
        tests:
          - relationships:
              to: ref('stg_aira_knowledge__journals')
              field: journal_id

      - name: publication_sectionid
        description: ""

      - name: publication_doi
        description: ""

      - name: publication_title
        description: ""

      - name: publication_type
        description: ""

      - name: published_year
        description: ""

      - name: accepted_date
        description: ""

      - name: published_date
        description: ""

  - name: stg_aira_knowledge__rankings
    description: "Staged Rnaking raw data from AIRA"
    columns:
      - name: ranking_id
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: rankings_name
        description: ""

  - name: stg_aira_knowledge__scienceradarmetrics
    description: "Staged Science Radar metrics raw data from AIRA"
    columns:
      - name: scienceradarmetrics_authorid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: trendiness
        description: ""

      - name: activeness
        description: ""

      - name: productivity
        description: ""

      - name: connectivity
        description: ""

      - name: influence
        description: ""

  - name: stg_aira_kowledge__publicationmetadata
    description: "Staged Publication Metadata raw data from AIRA"
    columns:
      - name: publicationmetadata_publicationid
        description: "Primary key for the table"
        tests:
          - unique
          - not_null

      - name: openaccesscategory
        description: ""


  
